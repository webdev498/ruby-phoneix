<%# item form %>

<%= form_for(@facility) do |f| %>

    <div class="col-lg-10 phx-working-area-background">

        <!-- working area title and nav -->
        <div class="row span10 phx-working-area-nav">

            <%# temporarily disable hamburger  with  type="button" %>
            <div class="col-xs-1 phx-hamburger-box">
                <button type="button" class="phx-hamburger">|||</button>
            </div>

            <div class="phx-working-area-nav">
                <row>
                    <div class="col-lg-8">
                        <div class="phx-working-area-title">Facility Maintenance&nbsp;&nbsp;|&nbsp;&nbsp;
                        </div>
                    </div>
                    <div class="col-lg-3 phx-working-area-title-buttons">
                    </div>
                </row>
            </div> <%# END of Working Area TITLE %>
        </div> <%# END of Working Area TITLE and NAV %>

        <%# BEGIN Working Area %>
        <div class="containter-fluid phx-working-area-background phx-working-area-position">

            <!-- Primary Info -->
            <div class="col-lg-4">

                <div class="phx-primary-info-column">

                    <div class="form-group phx-input-control-spacer" style="margin-top: -8px;"></div>

                        <div class="col-md-12">
                            <div class="col-md-8 pull-left" style="font-weight: bold; font-family:'Arial'; font-size: 18px; margin-left: -20px; margin-top:5px;">
                              Primary Info
                            </div>
                            <%= phx_checkbox_for f, :active, "Active", "col-md-1 pull-right" %>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="name">Facility Name</label>
                            <%= f.text_field :name, class: 'phx-form-control' %>
                        </div>

                        <div class="row phx-two-horizontal-controls">
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="short_name">Short Name</label>
                                <%= f.text_field :short_name, class: 'phx-form-control' %>
                            </div>
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="id">Number</label>
                                <%= f.text_field :id, class: 'phx-form-control' %>
                            </div>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="address1">Address 1</label>
                            <%= f.text_field :address1, class: 'phx-form-control' %>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="address2">Address 2</label>
                            <%= f.text_field :address2, class: 'phx-form-control' %>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="city">City</label>
                            <%= f.text_field :city, class: 'phx-form-control' %>
                        </div>

                        <div class="row phx-two-horizontal-controls">
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="state">State</label>
                                <%= f.text_field :state, class: 'phx-form-control' %>
                            </div>

                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="zip_code">Zip Code</label>
                                <%= f.text_field :zip_code, class: 'phx-form-control' %>
                            </div>
                        </div>

                        <div class="row phx-two-horizontal-controls">
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="phone">Phone</label>
                                <%= f.text_field :phone, class: 'phx-form-control' %>
                            </div>
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="fax">Fax</label>
                                <%= f.text_field :fax, class: 'phx-form-control' %>
                            </div>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="email">Email</label>
                            <%= f.text_field :email, class: 'phx-form-control' %>
                        </div>

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="account_number">Account Number</label>
                            <%= f.text_field :account_number, class: 'phx-form-control' %>
                        </div>

                        <div class="row phx-two-horizontal-controls">
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="internal_id_number">Facility Assigned ID</label>
                                <%= f.text_field :internal_id_number, class: 'phx-form-control' %>
                            </div>
                            <div class="col-md-6 form-group phx-input-control">
                                <label class="phx-form-control-label" for="state_id_number">State ID Number</label>
                                <%= f.text_field :state_id_number, class: 'phx-form-control' %>
                            </div>
                        </div>
                    </div>
                </div>

            <div class="col-lg-8  ">

                <!-- Tab labels -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#wing" role="tab" data-toggle="tab">Wing</a></li>
                    <li><a href="#itemPanel-bed" role="tab" data-toggle="tab">Bed</a></li>
                    <li><a href="#itemPanel-records" role="tab" data-toggle="tab">Medical Records</a></li>
                    <li><a href="#itemPanel-times" role="tab" data-toggle="tab">Pass Times</a></li>
                    <li><a href="#itemPanel-orders" role="tab" data-toggle="tab">Standing Orders</a></li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content phx-tab-pane">

                    <div class="tab-pane active" id="wing">
                        <div class="container-fluid">
                            <div class="row">
                              <div class="container-fluid col-lg-4">
                                <div class="field form-group phx-input-control">
                                  <label class="phx-form-control-label" for="wing_sel">Wing</label>
                                  <select id="wing_sel" class="phx-form-control">
                                    <% ch = 0 %>
                                    <%  @facility.wings.each do |f| %>
                                      <option value="<%= ch = ch+1 %>"> <%=  f.name %></option>
                                    <% end %>
                                  </select>
                                </div>
                              </div>
                            </div>
                          <% ch = 0 %>
                          <%= f.fields_for :wings do |w| %>

                            <div class="row" id = "wing_<%= ch = ch+1 %>" style="display:none">

                            <!-- First panel, first column -->
                            <div class="container-fluid col-lg-4">

                            <div class="row phx-two-horizontal-controls">
                                <div class="col-md-6 form-group phx-input-control">
                                    <label class="phx-form-control-label" for="type_of_facility">Type of Facility</label>
                                    <%= w.text_field :type_of_facility, class: 'phx-form-control' %>
                                </div>
                                <div class="col-md-6 form-group phx-input-control">
                                    <%= phx_checkbox_for w, :active, "Active", "col-md-1 pull-right" %>
                                </div>
                            </div>

                            <div class="field form-group phx-input-control">
                                <label class="phx-form-control-label" for="use_patient_counseling">Contact</label>
                                <%= w.text_field :contact, class: 'phx-form-control' %>
                            </div>

                            <div class="row phx-two-horizontal-controls">
                                <div class="col-md-6 form-group phx-input-control">
                                    <label class="phx-form-control-label" for="type_of_facility">Label Type</label>
                                    <%= w.text_field :label_type, class: 'phx-form-control' %>
                                </div>
                                <div class="col-md-6 form-group phx-input-control">
                                    <label class="phx-form-control-label" for="Label Default">Default # Labels</label>
                                    <%= w.text_field :label_default, class: 'phx-form-control' %>
                                </div>
                            </div>

                            <%= phx_checkbox_for w, :active, "Spool Labels", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Expand Sigs", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Default to Primary Plan", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use Start Date", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Post Zero Copay", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use Doc-U-Dose", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use Frequency Autofill", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use Anniversary Autofill", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use ProCycle Autofill", "col-md-1 pull-right" %>
                            <%= phx_checkbox_for w, :active, "Use Lot Number", "col-md-1 pull-right" %>

                        </div> <!-- END OF first panel, first column -->

                        <!-- GENERAL INFO panel, second column -->
                        <div class="container-fluid col-lg-4">

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="print_monograph">Print Monographs</label>
                              <%= w.text_field :print_monograph, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="print_monograph">Print Medication Guides</label>
                              <%= w.text_field :print_medication_guide, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="print_monograph">HIPPA Privacy Notice</label>
                              <%= w.text_field :require_hippa_privacy_notice, class: 'phx-form-control' %>
                          </div>

                          <%= phx_checkbox_for w, :print_delivery_receipt, "Print Delivery Receipt" %>
                          <%= phx_checkbox_for w, :print_fill_date, "Print Fill Date" %>
                          <%= phx_checkbox_for w, :print_original_date, "Print Original Date" %>
                          <%= phx_checkbox_for w, :require_rx_copy_in_facility, "Require Rx Copy in Facility" %>
                          <%= phx_checkbox_for w, :form_flags, "Use Form Flags" %>
                          <%= phx_checkbox_for w, :log_dur_results, "Log DUR Results" %>
                          <%= phx_checkbox_for w, :expiration_date, "Use Expiration Date", "col-md-1 pull-right" %>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="use_patient_counseling">Expiration Date Default</label>
                              <%= w.text_field :expiration_default, class: 'phx-form-control' %>
                          </div>

                          <%= phx_checkbox_for w, :emr_interface, "EMR Interface", "col-md-1 pull-right" %>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="use_patient_counseling">EMR Interface Type</label>
                              <%= w.text_field :emr_interface_type, class: 'phx-form-control' %>
                          </div>

                      </div> <!-- END OF WING INFO panel, second column -->


                  <div class="container-fluid col-lg-4">

                    <!-- END OF WING INFO panel, third column -->

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Universal Fee</label>
                            <%= w.text_field :universal_fee, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Unit Dose Fee</label>
                            <%= w.text_field :unit_dose_fee, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Controlled Fee</label>
                            <%= w.text_field :control_drug_fee, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Narcotic Fee</label>
                            <%= w.text_field :narcotic_fee, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <%= phx_checkbox_for w, :allow_customer_discount, "Customer Discounts Apply", "col-md-1 pull-right" %>

                    <div class="col-md-8 pull-left" style="font-weight: normal; font-family:'Arial'; font-size: 18px; margin-left: -20px; margin-top:5px;">
                      Assigned Price Schedules
                    </div>

                    <br>
                    </br>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                    <div class="row phx-two-horizontal-controls">
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="type_of_facility">Price Schedule</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                        <div class="col-md-6 form-group phx-input-control">
                            <label class="phx-form-control-label" for="Label Default">Name</label>
                            <%= f.text_field :type_of_facility, class: 'phx-form-control' %>
                        </div>
                    </div>

                </div> <!-- END OF WING INFO panel, third column -->

                            </div>
                          <% end %>
                  </div> <!-- END OF WING INFO panel container-fluid -->
              </div>

              <div class="tab-pane" id="itemPanel-bed">
                  <div class="container-fluid">
                      <row>
                        <!-- First panel, first column -->
                        <div class="container-fluid col-lg-4">

                            <div class="field form-group phx-input-control">
                                <label class="phx-form-control-label" for="use_patient_counseling">Room/Bed</label>
                                <%= f.text_field :name, class: 'phx-form-control' %>
                            </div>
                        </div>
                      </row>
                  </div>
              </div>

              <div class="tab-pane" id="itemPanel-records">

                <div class="container-fluid">
                  <!-- Panel 2, 1st column -->

                        <div class="field form-group phx-input-control">
                            <label class="phx-form-control-label" for="active">Print Order</label>
                            <%= f.text_field :active, class: 'phx-form-control' %>
                        </div>

                          <div class="field form-group phx-input-control">
                            <%= phx_checkbox_for f, :active, "Use Valid Division Codes", "col-md-1 pull-right" %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <%= phx_checkbox_for f, :active, "Print Pass Times", "col-md-1 pull-right" %>

                          </div>

                          <div class="field form-group phx-input-control">
                              <%= phx_checkbox_for f, :active, "Print MAR Forms", "col-md-1 pull-right" %>
                              <%= f.text_field :name, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">MAR Form</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">Routine Heading</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">PRN Heading</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <%= phx_checkbox_for f, :active, "Print Physician Orders", "col-md-1 pull-right" %>
                              <%= f.text_field :name, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">PO Form</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <%= phx_checkbox_for f, :active, "Print Treatment Forms", "col-md-1 pull-right" %>
                              <%= f.text_field :name, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">Treatment Form</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                          <div class="field form-group phx-input-control">
                              <label class="phx-form-control-label" for="active">Treatment Heading</label>
                              <%= f.text_field :active, class: 'phx-form-control' %>
                          </div>

                </div> <!-- END OF Panel 2 -->

              </div>

               <!--<div class="tab-pane" id="itemPanel-pricing">-->

                <!--<div class="container-fluid">-->
                <!--<row>-->
                <!--&lt;!&ndash; Panel 2, 1st column &ndash;&gt;-->
                <!--</div> &lt;!&ndash; END OF Panel 2 &ndash;&gt;-->
              <!--</div>-->

              <div class="tab-pane" id="itemPanel-times">

                <div class="container-fluid">
                  <!-- Panel 2, 1st column -->
                </div> <!-- END OF Panel 2 -->
             </div>

             <div class="tab-pane" id="itemPanel-orders">

               <div class="container-fluid">
                <!-- Panel 2, 1st column -->
              </div> <!-- END OF Panel 2 -->
            </div>
          </div>
        </div> <!-- end of work area -->
      </div>
</div>

<div id="facility_search_modal_partial">
  <div id="facilitySearchModal"></div>
</div>

<% end %>

<script>
    var cs = FEENX.Search.NewSearch('facility',
        {   context:      '',
            basePath : 'search',
            triggerField: ['name'],
            fieldPrefix:  '',
            modalId:      'facilitySearchModal',
            modalWidth: 450,
            hiddenDivId:  'hidden_fields',
            refresh:      true,
            refreshTo:    '/facilities/' ,
            });

    // create the corresponding hidden fields in the form
    cs.addHiddenFields();
    // create the corresponding data attribues in the modal rows
    cs.dataFormattedAttributes();

    var selected = 1;

    $(document).ready(function(){
        selected = $('#wing_sel').val();
       $('#wing_' + selected).show();

       $('#wing_sel').change(function(){
           var newSelected = $(this).val();
           $('#wing_' + selected).hide();
           $('#wing_' + newSelected).show();
           selected = newSelected;
       })
    });
</script>
